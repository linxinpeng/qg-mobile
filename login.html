<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <meta content="email=no" name="format-detection">
    <meta name="description" content="这是网站的描述，填写有助于SEO" />
    <meta name="keywords" content="这是网站关键词" />
    <title>登录</title>

    <script type="text/javascript" src="./js/flexible.js"></script>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/login.css">
    <link rel="stylesheet" href="./css/commom.css">
</head>

<body>
    <div class="login-wrap">
        <div class="login-logo">
            <img src="./images/header-logo.png" />
        </div>
        <div class="login-inputs">
            <div class="input__wrap">
                <select>
                    <option>+86</option>
                    <option>+108</option>
                </select>
                <input class="phone" type="tel" placeholder="请输入手机号码" maxlength="11" />
            </div>
            <div class="input__wrap">
                <span class="tips">密&nbsp;&nbsp;&nbsp;码</span>
                <input class="password" placeholder="请输入密码" type="password" maxlength="8" />
                <span class="input__wrap-eye">
                    <img data-img="close" src="./images/eye-close.png" />
                    <img class="is-none" data-img="open" src="./images/eye-open.png" />
                </span>
            </div>
            <button class="btn-other btn un-input btn-login">登录</button>
            <div class="other-actions">
                <a class="forget-password" href="./forget.html">忘记密码？</a>
                <a class="phone-register" href="./register.html">手机号注册></a>
            </div>
        </div>
        <div class="dividing-line line-space" data-text="微信账号登录"></div>
        <div class="wechat">
            <img src="./images/wx1.png" />
        </div>
    </div>
    <script src="https://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script>
    <script>
        $(function () {
            let showPassword = false;
            let hasInputPhone = false;
            let hasInputPassword = false;
            let phone = '';
            let password = '';

            $('.phone', '.login-inputs').off('input').on('input', function () {
                phone = $(this).val();
                hasInputPhone = phone ? true : false
                canLogin()
            })

            $('.password', '.login-inputs').off('input').on('input', function () {
                password = $(this).val();
                hasInputPassword = password ? true : false;
                canLogin()
            })

            //微信号登录
            $('.wechat','.login-wrap').off('click').on('click',function(){
                //dosome
            })

            //登录按钮点击事件
            $('.btn-login','.login-inputs').off('click').on('click',function(){
                if(hasInputPhone && hasInputPassword){
                    location.href = "./home.html"
                }
            })

            function canLogin() {
                if (hasInputPhone && hasInputPassword) {
                    $('.btn-other').removeClass('un-input')
                } else {
                    $('.btn-other').addClass('un-input')
                }
            }

            //显示密码
            $('.input__wrap-eye', '.login-inputs').off('click').on('click', function () {
                showPassword = !showPassword;
                let target = showPassword ? 'open' : 'close';
                let type = showPassword ? 'text' : 'password'
                $(`[data-img="${target}"]`).removeClass('is-none').siblings().addClass('is-none');
                $('.password', '.login-inputs').attr('type', type)
            })
        })
    </script>
</body>

</html>